{% extends "base.html" %}

{% block content %}
<h2>ğŸ‘¤ Patient Dashboard</h2>
<p>Welcome, <strong>{{ patient.user.username }}</strong>!</p>

<hr>

<h3>ğŸ“Š Quick Stats</h3>
<ul>
    <li><strong>Active Schedules:</strong> {{ upcoming_schedules|length }}</li>
    <li><strong>Recent Logs:</strong> {{ recent_logs|length }}</li>
    <li><strong>Stored Documents:</strong> {{ documents_count }}</li>
    <li><strong>Pending Appointments:</strong> {{ appointments_count }}</li>
</ul>

<hr>

<h3>â° Upcoming Medicine Schedule</h3>
{% if upcoming_schedules %}
    <ul>
    {% for schedule in upcoming_schedules %}
        <li>
            <strong>{{ schedule.prescription_item.medicine.name }}</strong> 
            at <strong>{{ schedule.time }}</strong>
            {% if schedule.repeat_daily %} (Daily){% endif %}
        </li>
    {% endfor %}
    </ul>
    <p><a href="{% url 'schedules:list' %}">ğŸ“‹ View All Schedules</a></p>
{% else %}
    <p>No schedules yet. <a href="{% url 'schedules:create' %}">â• Create one</a></p>
{% endif %}

<hr>

<h3>ğŸ“ Recent Intake Logs</h3>
{% if recent_logs %}
    <ul>
    {% for log in recent_logs %}
        <li>
            {{ log.schedule.prescription_item.medicine.name }} - 
            <strong>{{ log.get_status_display }}</strong> on {{ log.date|date:"M d, Y" }}
        </li>
    {% endfor %}
    </ul>
    <p><a href="{% url 'adherence:intake_list' %}">ğŸ“‹ View All Logs</a></p>
{% else %}
    <p>No intake logs yet. <a href="{% url 'adherence:intake_create' %}">â• Add one</a></p>
{% endif %}

<hr>

<h3>ğŸ”— Quick Links</h3>
<ul>
    <li><a href="{% url 'patients:profile' %}">ğŸ‘¤ My Profile</a></li>
    <li><a href="{% url 'medicines:list' %}">ğŸ’Š Medicine Catalog</a></li>
    <li><a href="{% url 'medicines:prescriptions' %}">ğŸ“‹ My Prescriptions</a></li>
    <li><a href="{% url 'schedules:list' %}">ğŸ’Š My Medicine Schedules</a></li>
    <li><a href="{% url 'adherence:intake_list' %}">âœ… My Intake Logs</a></li>
    <li><a href="{% url 'adherence:reminder_list' %}">ğŸ”” My Reminders</a></li>
    <li><a href="{% url 'documents:list' %}">ğŸ“„ My Documents</a></li>
    <li><a href="{% url 'appointments:patient_list' %}">ğŸ“… My Appointments</a></li>
   <li> <a href="{% url 'patients:dependent_requests' %}">
  ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Manage Family Access
</a></li>
</ul>

<hr>
<a href="{% url 'accounts:logout' %}">ğŸšª Logout</a>
{% endblock %}